<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Budh Baran Jewellers ‚Äì POS V10 Final</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
body{margin:0;background:#000;font-family:'Segoe UI',sans-serif;color:#f5d186;}
.header{text-align:center;padding:22px 10px 14px;border-bottom:1px solid #2c2c2c;background:#000;}
.logo{width:120px;height:120px;border-radius:100px;object-fit:cover;margin-bottom:10px;}
.title{font-size:28px;font-weight:700;}
.tagline{font-family:'Georgia';font-style:italic;font-size:16px;margin-top:4px;color:#ffe6a8;}
.info{margin-top:6px;font-size:12px;color:#e6c67a;}
.section{background:#121212;margin:15px;border-radius:12px;padding:15px;border:1px solid #2c2c2c;}
h2{margin:0 0 12px 0;font-size:18px;color:#ffdb95;border-bottom:1px solid #2c2c2c;padding-bottom:6px;}
.row{display:flex;justify-content:space-between;padding:5px 0;font-size:14px;color:#ddb96f;}
.value{color:#ffe8b2;font-weight:600;}
input,select{width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px;background:#222;color:#fff;}
.btn{padding:12px;background:#d4a034;color:#000;font-weight:bold;border:none;border-radius:8px;width:100%;margin-top:10px;}
.nav{position:fixed;bottom:0;left:0;right:0;background:#0a0a0a;border-top:1px solid #2c2c2c;display:flex;}
.nav button{flex:1;padding:12px 5px;background:none;border:none;color:#d1b671;font-size:12px;}
.nav button.active{color:#ffdb95;font-weight:bold;}
</style>
</head>
<body>

<div class="header">
    <img src="logo.png" class="logo">
    <div class="title">‡¶¨‡ßÅ‡¶ß ‡¶¨‡¶∞‡¶® ‡¶ú‡ßÅ‡ßü‡ßá‡¶≤‡¶æ‡¶∞‡ßç‡¶∏</div>
    <div class="tagline">"Honestly is the best policy"</div>
    <div class="info">üìû 01713 612578 ‚Ä¢ üìç ‡¶ö‡¶ø‡¶ü‡¶æ‡¶ó‡¶æ‡¶Ç ‡¶∞‡ßã‡¶°, ‡¶∏‡¶ø‡¶¶‡ßç‡¶¶‡¶ø‡¶∞‡¶ó‡¶û‡ßç‡¶ú, ‡¶®‡¶æ‡¶∞‡¶æ‡ßü‡¶£‡¶ó‡¶û‡ßç‡¶ú</div>
</div>

<div class="section">
    <h2>üìä ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
    <div class="row"><span>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø</span><span class="value" id="d_sale">‡ß≥ 0</span></div>
    <div class="row"><span>Cash In ‚Äì Out</span><span class="value" id="d_cash">‡ß≥ 0</span></div>
    <div class="row"><span>‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡¶∞‡ßç‡¶ü‡¶ó‡ßá‡¶ú</span><span class="value" id="d_mort">‡ß≥ 0</span></div>
    <div class="row"><span>‡¶∏‡ßç‡¶ü‡¶ï ‡¶Æ‡ßã‡¶ü ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</span><span class="value" id="d_stock">0 g</span></div>
</div>

<div class="section">
    <h2>üìÖ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∏‡¶æ‡¶∞‡¶æ‡¶Ç‡¶∂</h2>
    <div class="row"><span>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø</span><span class="value" id="m_sale">‡ß≥ 0</span></div>
    <div class="row"><span>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï Cash Net</span><span class="value" id="m_cash">‡ß≥ 0</span></div>
    <div class="row"><span>Active ‡¶Æ‡¶∞‡ßç‡¶ü‡¶ó‡ßá‡¶ú</span><span class="value" id="m_actmort">‡ß≥ 0</span></div>
    <div class="row"><span>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Æ‡¶∞‡ßç‡¶ü‡¶ó‡ßá‡¶ú ‡¶°‡¶ø‡¶â</span><span class="value" id="m_due">‡ß≥ 0</span></div>
</div>

<!-- SALES PAGE -->
<div id="page_sales" style="display:none; padding-bottom:80px;">
    <div class="section">
        <h2>üßæ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø / ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</h2>
        <input id="s_barcode" placeholder="‡¶¨‡¶æ‡¶∞‡¶ï‡ßã‡¶° ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®" onchange="loadStockToSale()">
        <input id="s_customer" placeholder="‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
        <input id="s_item" placeholder="‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶ï‡ßã‡¶°">
    </div>

    <div class="section">
        <h2>‚öñÔ∏è ‡¶ì‡¶ú‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h2>
        <input id="w_vori" type="number" step="0.01" placeholder="‡¶≠‡¶∞‡¶ø">
        <input id="w_ana"  type="number" step="0.01" placeholder="‡¶Ü‡¶®‡¶æ">
        <input id="w_roti" type="number" step="0.01" placeholder="‡¶∞‡¶§‡¶ø">
        <input id="w_point"type="number" step="0.01" placeholder="‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü">
        <input id="w_gram" type="number" step="0.001" placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ (‡¶Ø‡¶¶‡¶ø ‡¶¶‡ßá‡¶®)">
        <button class="btn" onclick="calcGram()">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <div class="row"><span>‡¶Æ‡ßã‡¶ü ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ:</span><span class="value" id="w_total">0.000 g</span></div>
    </div>

    <div class="section">
        <h2>‚ú® ‡¶ó‡ßã‡¶≤‡ßç‡¶° ‡¶∞‡ßá‡¶ü</h2>
        <button class="btn" onclick="setRate(22)">‡ß®‡ß® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ü</button>
        <button class="btn" onclick="setRate(21)">‡ß®‡ßß ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ü</button>
        <button class="btn" onclick="setRate(18)">‡ßß‡ßÆ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ü</button>
        <input id="r_gram" type="number" step="0.01" placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∞‡ßá‡¶ü">
    </div>

    <div class="section">
        <h2>üí∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h2>
        <input id="c_making" type="number" placeholder="‡¶Æ‡ßá‡¶ï‡¶ø‡¶Ç (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ)">
        <input id="c_waste"  type="number" placeholder="‡¶ì‡ßü‡ßá‡¶∏‡ßç‡¶ü‡ßá‡¶ú %">
        <input id="c_stone"  type="number" placeholder="‡¶∏‡ßç‡¶ü‡ßã‡¶® ‡¶¶‡¶æ‡¶Æ">
        <input id="c_disc"   type="number" placeholder="‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü">
        <input id="c_paid"   type="number" placeholder="‡¶®‡¶ó‡¶¶">
        <button class="btn" onclick="calcBill()">‡¶®‡ßá‡¶ü ‡¶¶‡¶æ‡¶Æ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</button>
        <div class="row"><span>‡¶®‡ßá‡¶ü:</span><span class="value" id="c_net">‡ß≥ 0</span></div>
        <div class="row"><span>‡¶¨‡¶æ‡¶ï‡¶ø:</span><span class="value" id="c_due">‡ß≥ 0</span></div>
    </div>

    <button class="btn" onclick="saveSale()">‚úî ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠</button>
    <button class="btn" onclick="printBill()">üñ® ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶¨‡¶ø‡¶≤</button>
</div>

<!-- PRINT BILL -->
<div id="print_area" style="display:none;font-family:Arial;">
    <h2>‡¶¨‡ßÅ‡¶ß ‡¶¨‡¶∞‡¶® ‡¶ú‡ßÅ‡ßü‡ßá‡¶≤‡¶æ‡¶∞‡ßç‡¶∏</h2>
    <div>‡¶ö‡¶ø‡¶ü‡¶æ‡¶ó‡¶æ‡¶Ç ‡¶∞‡ßã‡¶°, ‡¶∏‡¶ø‡¶¶‡ßç‡¶¶‡¶ø‡¶∞‡¶ó‡¶û‡ßç‡¶ú, ‡¶®‡¶æ‡¶∞‡¶æ‡ßü‡¶£‡¶ó‡¶û‡ßç‡¶ú</div><br>
    <div id="p_date"></div>
    <div id="p_customer"></div>
    <div id="p_item"></div>
    <div id="p_weight"></div>
    <div id="p_net"></div>
    <div id="p_paid"></div>
    <div id="p_due"></div>
</div>

<div class="nav">
    <button class="active">‡¶π‡ßã‡¶Æ</button>
    <button>‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø</button>
    <button>‡¶Æ‡¶∞‡ßç‡¶ü‡¶ó‡ßá‡¶ú</button>
    <button>‡¶∏‡ßç‡¶ü‡¶ï</button>
    <button>‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
</div>

<script>
let DB={
 sales:JSON.parse(localStorage.getItem("BB_sales")||"[]"),
 stock:JSON.parse(localStorage.getItem("BB_stock")||"[]"),
 customers:JSON.parse(localStorage.getItem("BB_customers")||"[]"),
 supplier:JSON.parse(localStorage.getItem("BB_supplier")||"[]"),
 mortgage:JSON.parse(localStorage.getItem("BB_mortgage")||"[]"),
 cashbook:JSON.parse(localStorage.getItem("BB_cashbook")||"[]")
};

function saveDB(){
 localStorage.setItem("BB_sales",JSON.stringify(DB.sales));
 localStorage.setItem("BB_stock",JSON.stringify(DB.stock));
}
function calcGram(){
 let v=parseFloat(w_vori.value)||0;
 let a=parseFloat(w_ana.value)||0;
 let r=parseFloat(w_roti.value)||0;
 let p=parseFloat(w_point.value)||0;
 let g=parseFloat(w_gram.value)||0;
 let t=(v*11.664)+(a*0.729)+(r*0.1215)+(p*0.01)+g;
 w_total.innerHTML=t.toFixed(3)+" g";return t;
}
function setRate(k){
 let base=k==22?105000:k==21?100000:80000;
 r_gram.value=(base/11.664).toFixed(2);
}
function calcBill(){
 let gram=calcGram();
 let rate=parseFloat(r_gram.value)||0;
 let mk=parseFloat(c_making.value)||0;
 let ws=parseFloat(c_waste.value)||0;
 let st=parseFloat(c_stone.value)||0;
 let dc=parseFloat(c_disc.value)||0;
 let pd=parseFloat(c_paid.value)||0;
 let gold=gram*rate;
 let wv=gold*(ws/100);
 let mkv=gram*mk;
 let net=gold+wv+mkv+st-dc;
 let due=net-pd;
 c_net.innerHTML="‡ß≥ "+net.toFixed(2);
 c_due.innerHTML="‡ß≥ "+due.toFixed(2);
 return {net,paid:pd,due,gram};
}
function loadByBarcode(bc){
 return DB.stock.find(x=>x.barcode==bc)||null;
}
function loadStockToSale(){
 let bc=s_barcode.value;if(!bc)return;
 let it=loadByBarcode(bc);
 if(it){
  s_item.value=it.code;
  w_gram.value=it.gram;
  w_total.innerHTML=it.gram+" g";
  if(it.karat==22) setRate(22);
  if(it.karat==21) setRate(21);
  if(it.karat==18) setRate(18);
  alert("‚úî ‡¶∏‡ßç‡¶ü‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá");
 }else alert("‚ùå ‡¶¨‡¶æ‡¶∞‡¶ï‡ßã‡¶° ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø");
}
function saveSale(){
 let bill=calcBill();
 let e={
  date:new Date().toISOString(),
  customer:s_customer.value,
  item:s_item.value,
  barcode:s_barcode.value,
  net:bill.net,paid:bill.paid,due:bill.due,
  gram:bill.gram
 };
 DB.sales.push(e);
 let f=DB.stock.find(x=>x.barcode==s_barcode.value);
 if(f) f.gram=Math.max(0,f.gram-bill.gram);
 saveDB();
 alert("‚úî ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá");
}
function printBill(){
 let b=calcBill();
 p_date.innerHTML="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: "+new Date().toLocaleDateString('bn-BD');
 p_customer.innerHTML="‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞: "+s_customer.value;
 p_item.innerHTML="‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ: "+s_item.value;
 p_weight.innerHTML="‡¶ì‡¶ú‡¶®: "+b.gram.toFixed(3)+" g";
 p_net.innerHTML="‡¶®‡ßá‡¶ü: ‡ß≥ "+b.net.toFixed(2);
 p_paid.innerHTML="‡¶®‡¶ó‡¶¶: ‡ß≥ "+b.paid.toFixed(2);
 p_due.innerHTML="‡¶¨‡¶æ‡¶ï‡¶ø: ‡ß≥ "+b.due.toFixed(2);
 document.body.innerHTML=document.getElementById("print_area").innerHTML;
 window.print();location.reload();
}
</script>

</body>
</html>
